<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Text Repository Test</title>
    <script src="http://gregor.middell.net/text-repo/static/yui-3.4.0/yui/yui-min.js" type="text/javascript"></script>
    <script src="http://gregor.middell.net/text-repo/static/interedition-text/interedition-text-min.js"
            type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">
    YUI().use("node ", "interedition-text", function(Y) {
        var
                body = Y.one("body"),
                t = new Y.interedition.text.Text({ text: "Hello World!" });

        body.append(Y.Node.create("<div style='margin: 2em' />").setContent(t.get("text")));

        t.after("dataChange", function() {
            body.append(Y.Node.create("<div style='margin: 2em' />").setContent(t.get("text")));
            Y.each(t.get("annotations"), function(a) {
                body.append(Y.Node.create("<h4/>").setContent(a.name.toString() + ": " + a.range.toString()));
                Y.each(a.data, function(attr) {
                   body.append(Y.Node.create("<p/>").setContent(attr[0].toString() + "='" + attr[1] + "'"));
                });
            });
        });
        (new Y.interedition.text.Repository({ base: "http://gregor.middell.net/text-repo/"})).read(2, t);
    });
</script>
</body>
</html>